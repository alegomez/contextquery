function mixedSigns(e,t,n){if(2==e.length){let i,s,r=!1;for(let l in e)e[l].includes(t)&&(s=e[l],e.splice(l,1),0==l&&(r=!0));void 0!=s&&(i=s.split(t),r?(e.unshift(i[1]),e.unshift(i[0]),"&lt;"===t?n.left=!0:n.right=!0):(e.push(i[0]),e.push(i[1]),"&lt;"===t?n.right=!0:n.left=!0))}}function generateContextStyles(e,t){let n=e.split(/\s*@context\s*/),s=!0,r=/\s*,\s*|\s*or\s*|\s*OR\s*/;if(n.splice(0,1),n.length<1&&t){n=[];let i=t.split(r),l=0;for(let o of i)n[l++]=o+"{"+e+"}}";s=!1}for(let l of n){let e,n,o="&lt;",a="&gt;",u="&lt;=",c="&gt;=";if(e=l.substring(l.indexOf("("),l.indexOf("{")),n=e.split(r),s&&t){let e=t.split(r),i=[];for(let s of e)for(let l in n)i.push(n[l]+" and "+s);n=i}for(let d of n){let e,t,n=[],s=[],r=[],f=d.split(/\s*and\s*|\s*AND\s*/);for(let p of f){let e,t,n=p.substring(p.indexOf("(")+1,p.indexOf(")")),i="%",r={},l={left:!1,right:!1};if(p.includes(o)||p.includes(a)){if(n.includes(o)&&n.includes(a))return void console.error("you have mixed the greater than and less than symbol in an expression!");n.includes(o)&&(n.includes(u)?(e=n.split(u),mixedSigns(e,o,l)):(e=n.split(o),l={left:!0,right:!0}),2==e.length?e[0].includes(i)||!isNaN(e[0])?(r.min=parseFloat(e[0]),r.feature=e[1].trim()):(r.max=parseFloat(e[1]),r.feature=e[0].trim()):(r.feature=e[1].trim(),r.min=parseFloat(e[0]),r.max=parseFloat(e[2])),(l.left||l.right)&&(r.lt_gt=l),s.push(r)),n.includes(a)&&(n.includes(c)?(e=n.split(c),mixedSigns(e,a,l)):(e=n.split(a),l={left:!0,right:!0}),2==e.length?e[0].includes(i)||!isNaN(e[0])?(r.max=parseFloat(e[0]),r.feature=e[1].trim()):(r.min=parseFloat(e[1]),r.feature=e[0].trim()):(r.feature=e[1].trim(),r.max=parseFloat(e[0]),r.min=parseFloat(e[2])),(l.left||l.right)&&(r.lt_gt=l),s.push(r))}else if(p.includes("min-")||p.includes("max-")){let e,n,i,l="min-",o="max-";if(e=p.substring(p.indexOf("(")+1,p.indexOf(")")),n=e.split(/\s*:\s*/),t=n[0].trim(),t=t.replace("min-",""),t=t.replace("max-",""),r.feature=t,i=parseFloat(n[1]),0==s.length)n[0].includes(l)&&(r.min=i),n[0].includes(o)&&(r.max=i),s.push(r);else for(let a of s)a.feature!=r.feature?(n[0].includes(l)&&(r.min=i),n[0].includes(o)&&(r.max=i),s.push(r)):(n[0].includes(l)&&(a.min=i),n[0].includes(o)&&(a.max=i))}else{let e=p.substring(p.indexOf("(")+1,p.indexOf(")"));r.feature=e,r.abs=1,s.push(r)}}e=l.substring(l.indexOf("{")+1,l.lastIndexOf("}")),t=e.split(/\s*}\s*/),t.pop();for(let m of t){let e,t,n;e=m.substring(0,m.indexOf("{")),t=m.substring(m.indexOf("{")+1),n=e.split(/\s*,\s*/);for(let i of n){let e={element:i.trim(),properties:t.trim()};""!==e.properties&&r.push(e)}}n.push(s),n.push(r),i.push(n)}}appendStyles(i),console.log(i)}function get(e){return new Promise(function(t,n){var i=new XMLHttpRequest;i.open("GET",e),i.onload=function(){200==i.status?t(i.response):n(Error(i.statusText))},i.onerror=function(){n(Error("Network Error"))},i.send()})}function appendStyles(){let e=document.querySelector("head"),n=document.createElement("style"),s=i.length,r=".css-ctx-queries-",l="";n.type="text/css",n.id="cssCtxQueriesStyleTag";for(let o of i){s--;for(let e of o[1]){let n=e.element;l+="html"===n?n+r+(t+s)+"{"+e.properties+"}":r+(t+s)+" "+n.replace("&gt;",">")+"{"+e.properties+"}"}}document.getElementById("cssCtxQueriesStyleTag")?(document.getElementById("cssCtxQueriesStyleTag").innerHTML="",document.getElementById("cssCtxQueriesStyleTag").appendChild(document.createTextNode(l))):(n.appendChild(document.createTextNode(l)),e.appendChild(n))}function updateFeatVal(t,n){for(let i of e)i.name==t&&(i.value=n)}function performContextCheck(s,r){updateFeatVal(s,r);let l=i.length;for(let o of i){l--;let i="css-ctx-queries-"+(t+l),s=!0;for(let r of o[0]){let t=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY;for(let i of e)i.name===r.feature&&(r.hasOwnProperty("abs")?i.value||(s=!1):(r.hasOwnProperty("min")&&(t=r.min),r.hasOwnProperty("max")&&(n=r.max),r.hasOwnProperty("lt_gt")&&(r.lt_gt.left&&++t,r.lt_gt.right&&--n),t==-(1/0)&&n==1/0||(i.value<t||n<i.value)&&(s=!1)))}s?n.classList.contains(i)||n.classList.add(i):n.classList.contains(i)&&n.classList.remove(i)}}let e=[{name:"devicelight",value:null,callback:null},{name:"devicemotion",value:null,callback:null},{name:"deviceproximity",value:null,callback:null},{name:"touch",value:null,callback:function(){return!!("ontouchstart"in window||navigator.maxTouchPoints)}}];!function(){for(feature of e)null==feature.callback?feature.name in window?feature.supported=!0:feature.supported=!1:feature.supported=feature.callback();console.log(e)}();const t=Math.floor(200*Math.random())+701;let n=document.querySelector("html"),i=[];class s extends HTMLElement{constructor(){super()}connectedCallback(){this.href(),this.style.display="none"}content(e){let t=this.innerHTML;""!=t.trim()?generateContextStyles(t.trim(),e):console.error("Context-Styles have not been declared, please use the href attribute or write them directly in the context-style tag.")}href(){let e=!1;this.hasAttribute("context")&&""!=this.getAttribute("context")&&(e=this.getAttribute("context").replace(/>/g,"&gt;").replace(/</g,"&lt;")),this.hasAttribute("href")&&""!=this.getAttribute("href")?get(this.getAttribute("href")).then(t=>{let n=t.replace(/>/g,"&gt;").replace(/</g,"&lt;");generateContextStyles(n,e),this.content(e)},e=>{console.error("Failed!",e)}):(console.log("href empty or non existent"),this.content(e))}}customElements.define("context-style",s),window.addEventListener("devicelight",function(e){let t=e.value/10;performContextCheck("devicelight",Math.round(t))});let r=0;window.addEventListener("devicemotion",function(e){let t=Math.round(Math.sqrt(e.acceleration.y*e.acceleration.y+e.acceleration.x*e.acceleration.x));(t>r||0==t)&&(r=t,performContextCheck("devicemotion",t))}),window.addEventListener("deviceproximity",function(e){let t=(e.value-e.min)/(e.max-e.min)*100;performContextCheck("deviceproximity",t)}),performContextCheck("touch",!!("ontouchstart"in window||navigator.maxTouchPoints));