<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">

    <title>@Context</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="text/javascript" src="js/webcomponents-hi-sd-ce.js"></script>
    <link rel="import" href="html/context.min.html">

    <style>
        html, body {
            position: relative;
            margin: 0;
            padding: 0;
            height: 100%;
        }

        body {
            font-family: Verdana, Geneva, Tahoma, sans-serif;
        }
        .container {
            max-width: 400px;
            margin: 0 auto;
            padding: 0 15px;
            text-align: center;
        }
        label {
            margin-bottom: 24px;
            
        }
        input[type="range"] {
            margin: 0;
        }
        label, input[type="range"], .adapt {
            display: inline-block;
            width: 100%;
            padding: 6px 0;
            border: none;
        }
        .adapt {
            margin: 10% 0;
            font-size: 200px;
            font-weight: 600;
            display: inline-block;
        }
        .code {
           text-align: left;
           padding: 36px 12px;
        }
        .code .rule {
            color: blue;
        }
        .code .feat {
            color: red;
        }
        .code .value {
            color: green;
        }
        .code .stringval {
            color: cornflowerblue;
        }
        .code .selector {
            color: darkred;
        }

    </style>
    <context-style context="(10 < devicelight <= 30)">  
        body { background-color: black; color: white; } 
        .code .rule {
            color: mediumpurple;
        }
        .code .feat {
            color: lightskyblue;
        }
        .code .value {
            color: darkseagreen;
        }
        .code .stringval {
            color: lightgray;
        }
        .code .selector {
            color: #ffd966;
        }   
    </context-style>
    <script>

        let inputElm, outputElm;
        document.addEventListener('DOMContentLoaded',function(){
            inputElm = document.querySelector("#in");
            motion = document.querySelector("#motion");
            outputElm = document.querySelector('.adapt');
            inputElm.addEventListener('change',function(){
                performContextCheck( 'devicelight', parseInt(inputElm.value) ); // this not supported in Firefox
                outputElm.innerHTML = inputElm.value;
            });
            motion.addEventListener('change',function(){
                performContextCheck( 'devicemotion', parseInt(motion.value) );
            });
        });

        // Check if Polyfill is working
        window.addEventListener('HTMLImportsLoaded', function(e) {
            //console.log('HTML Imports Loaded');
        });

    </script>

</head>
<body class="body">

<header class="navbar">
</header>
<main>
    <div class="container">
        <div class="inner">
            <div class="adapt">0</div>
        </div>
    </div>
</main>
<footer class="fix-bottom">
    <div class="container">
        <div class="inner">
            <label for="in">device light</label>
            <input type="range" id="in" name="in" value="0">
            <input type="range" id="motion" name="motion" value="0" style="display:none;">
            <div class="code">
                <code>
                    <span class="rule">@context</span> (<span class="value">10</span> &lt; <span class="feat">devicelight</span> &lt;= <span class="value">30</span>) { <br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="selector">body</span> { <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="feat">background-color</span>:<span class="stringval"> black</span>;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="feat">color</span>:<span class="stringval"> white</span>; <br>
&nbsp;&nbsp;&nbsp;&nbsp;} <br>   
                    }
                </code>
            </div>
        </div>
    </div>
</footer>
</body>
</html>