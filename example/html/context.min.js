function mixedSigns(e,t,n){if(2==e.length){let i,r,s=!1;for(let l in e)e[l].includes(t)&&(r=e[l],e.splice(l,1),0==l&&(s=!0));void 0!=r&&(i=r.split(t),s?(e.unshift(i[1]),e.unshift(i[0]),"&lt;"===t?n.left=!0:n.right=!0):(e.push(i[0]),e.push(i[1]),"&lt;"===t?n.right=!0:n.left=!0))}}function generateContextStyles(e,t){let n=e.split("@context"),r=!0;if(n.splice(0,1),n.length<1&&t){n=[];let i=t.split(","),s=0;for(let l of i)n[s++]=l+"{"+e+"}}";r=!1}for(let s of n){let e,n,l="&lt;",o="&gt;",a="&lt;=",u="&gt;=";if(e=s.substring(s.indexOf("("),s.indexOf("{")),n=e.split(","),r&&t){let e=t.split(","),i=[];for(let r of e)for(let s in n)i.push(n[s]+" and "+r);n=i}for(let c of n){let e,t,n=[],r=[],d=[],f=c.split("and");for(let p of f){let e,t,n=p.substring(p.indexOf("(")+1,p.indexOf(")")),i="%",s={},c={left:!1,right:!1};if(p.includes(l)||p.includes(o)){if(n.includes(l)&&n.includes(o))return void console.error("you have mixed the greater than and less than symbol in an expression!");n.includes(l)&&(n.includes(a)?(e=n.split(a),mixedSigns(e,l,c)):(e=n.split(l),c={left:!0,right:!0}),2==e.length?e[0].includes(i)||!isNaN(e[0])?(s.min=parseFloat(e[0]),s.feature=e[1].trim()):(s.max=parseFloat(e[1]),s.feature=e[0].trim()):(s.feature=e[1].trim(),s.min=parseFloat(e[0]),s.max=parseFloat(e[2])),(c.left||c.right)&&(s.lt_gt=c),r.push(s)),n.includes(o)&&(n.includes(u)?(e=n.split(u),mixedSigns(e,o,c)):(e=n.split(o),c={left:!0,right:!0}),2==e.length?e[0].includes(i)||!isNaN(e[0])?(s.max=parseFloat(e[0]),s.feature=e[1].trim()):(s.min=parseFloat(e[1]),s.feature=e[0].trim()):(s.feature=e[1].trim(),s.max=parseFloat(e[0]),s.min=parseFloat(e[2])),(c.left||c.right)&&(s.lt_gt=c),r.push(s))}else if(p.includes("min-")||p.includes("max-")){let e,n,i,l="min-",o="max-";if(e=p.substring(p.indexOf("(")+1,p.indexOf(")")),n=e.split(":"),t=n[0].trim(),t=t.replace("min-",""),t=t.replace("max-",""),s.feature=t,i=parseFloat(n[1]),0==r.length)n[0].includes(l)&&(s.min=i),n[0].includes(o)&&(s.max=i),r.push(s);else for(let a of r)a.feature!=s.feature?(n[0].includes(l)&&(s.min=i),n[0].includes(o)&&(s.max=i),r.push(s)):(n[0].includes(l)&&(a.min=i),n[0].includes(o)&&(a.max=i))}else{let e=p.substring(p.indexOf("(")+1,p.indexOf(")"));s.feature=e,s.abs=1,r.push(s)}}e=s.substring(s.indexOf("{")+1,s.lastIndexOf("}")),t=e.split("}"),t.pop();for(let m of t){let e,t,n;e=m.substring(0,m.indexOf("{")),t=m.substring(m.indexOf("{")+1),n=e.split(",");for(let i of n){let e={element:i.trim(),properties:t.trim()};""!==e.properties&&d.push(e)}}n.push(r),n.push(d),i.push(n)}}appendStyles(i),console.log(i)}function get(e){return new Promise(function(t,n){var i=new XMLHttpRequest;i.open("GET",e),i.onload=function(){200==i.status?t(i.response):n(Error(i.statusText))},i.onerror=function(){n(Error("Network Error"))},i.send()})}function appendStyles(){let e=document.querySelector("head"),n=document.createElement("style"),r=i.length,s=".css-ctx-queries-",l="";n.type="text/css",n.id="cssCtxQueriesStyleTag";for(let o of i){r--;for(let e of o[1]){let n=e.element;l+="html"===n?n+s+(t+r)+"{"+e.properties+"}":s+(t+r)+" "+n.replace("&gt;",">")+"{"+e.properties+"}"}}document.getElementById("cssCtxQueriesStyleTag")?(document.getElementById("cssCtxQueriesStyleTag").innerHTML="",document.getElementById("cssCtxQueriesStyleTag").appendChild(document.createTextNode(l))):(n.appendChild(document.createTextNode(l)),e.appendChild(n))}function updateFeatVal(t,n){for(let i of e)i.name==t&&(i.value=n)}function performContextCheck(r,s){updateFeatVal(r,s);let l=i.length;for(let o of i){l--;let i="css-ctx-queries-"+(t+l),r=!0;for(let s of o[0]){let t=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY;for(let i of e)i.name===s.feature&&(s.hasOwnProperty("abs")?i.value||(r=!1):(s.hasOwnProperty("min")&&(t=s.min),s.hasOwnProperty("max")&&(n=s.max),s.hasOwnProperty("lt_gt")&&(s.lt_gt.left&&++t,s.lt_gt.right&&--n),t==-(1/0)&&n==1/0||(i.value<t||n<i.value)&&(r=!1)))}r?n.classList.contains(i)||n.classList.add(i):n.classList.contains(i)&&n.classList.remove(i)}}let e=[{name:"devicelight",value:null,callback:null},{name:"devicemotion",value:null,callback:null},{name:"deviceproximity",value:null,callback:null},{name:"touch",value:null,callback:function(){return!!("ontouchstart"in window||navigator.maxTouchPoints)}}];!function(){for(feature of e)null==feature.callback?feature.name in window?feature.supported=!0:feature.supported=!1:feature.supported=feature.callback();console.log(e)}();const t=Math.floor(200*Math.random())+701;let n=document.querySelector("html"),i=[];class r extends HTMLElement{constructor(){super()}connectedCallback(){this.href(),this.style.display="none"}content(e){let t=this.innerHTML;""!=t.trim()?generateContextStyles(t.trim(),e):console.error("Context-Styles have not been declared, please use the href attribute or write them directly in the context-style tag.")}href(){let e=!1;this.hasAttribute("context")&&""!=this.getAttribute("context")&&(e=this.getAttribute("context").replace(/>/g,"&gt;").replace(/</g,"&lt;")),this.hasAttribute("href")&&""!=this.getAttribute("href")?get(this.getAttribute("href")).then(t=>{let n=t.replace(/>/g,"&gt;").replace(/</g,"&lt;");generateContextStyles(n,e),this.content(e)},e=>{console.error("Failed!",e)}):(console.log("href empty or non existent"),this.content(e))}}customElements.define("context-style",r),window.addEventListener("devicelight",function(e){let t=e.value/10;performContextCheck("devicelight",Math.round(t))});let s=0;window.addEventListener("devicemotion",function(e){let t=Math.round(Math.sqrt(e.acceleration.y*e.acceleration.y+e.acceleration.x*e.acceleration.x));(t>s||0==t)&&(s=t,performContextCheck("devicemotion",t))}),window.addEventListener("deviceproximity",function(e){let t=(e.value-e.min)/(e.max-e.min)*100;performContextCheck("deviceproximity",t)}),performContextCheck("touch",!!("ontouchstart"in window||navigator.maxTouchPoints));