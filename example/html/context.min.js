function mixedSigns(e,t,n){if(2==e.length){let i,s,r=!1;for(let o in e)e[o].includes(t)&&(s=e[o],e.splice(o,1),0==o&&(r=!0));void 0!=s&&(i=s.split(t),r?(e.unshift(i[1]),e.unshift(i[0]),"&lt;"===t?n.left=!0:n.right=!0):(e.push(i[0]),e.push(i[1]),"&lt;"===t?n.right=!0:n.left=!0))}}function generateContextStyles(e,t){let s=e.split(/\s*@context\s*/),r=/\s*,\s*|\s*or\s*/i;for(let o of s)if(""!=o){let e,s=o.substring(o.indexOf("("),o.indexOf("{")),l="&lt;",a="&gt;",u="&lt;=",c="&gt;=";if(s.includes("(")&&s.includes(")")){if(e=s.split(r),t){let n=t.split(r),i=[];for(let s of n)for(let o in e)i.push(e[o]+" and "+s);e=i}}else e=t.split(r);for(let d of e){let e,t,r={root:n,contexts:[],sheets:[]},p=[],h=[],f=d.split(/\s*and\s*/i);for(let m of f){let e,t,n=m.substring(m.indexOf("(")+1,m.indexOf(")")),i="%",s={},r={left:!1,right:!1};if(m.includes(l)||m.includes(a)){if(n.includes(l)&&n.includes(a))return void console.error("you have mixed the greater than and less than symbol in an expression!");n.includes(l)&&(n.includes(u)?(e=n.split(u),mixedSigns(e,l,r)):(e=n.split(l),r={left:!0,right:!0}),2==e.length?e[0].includes(i)||!isNaN(e[0])?(s.min=parseFloat(e[0]),s.feature=e[1].trim()):(s.max=parseFloat(e[1]),s.feature=e[0].trim()):(s.feature=e[1].trim(),s.min=parseFloat(e[0]),s.max=parseFloat(e[2])),(r.left||r.right)&&(s.lt_gt=r),p.push(s)),n.includes(a)&&(n.includes(c)?(e=n.split(c),mixedSigns(e,a,r)):(e=n.split(a),r={left:!0,right:!0}),2==e.length?e[0].includes(i)||!isNaN(e[0])?(s.max=parseFloat(e[0]),s.feature=e[1].trim()):(s.min=parseFloat(e[1]),s.feature=e[0].trim()):(s.feature=e[1].trim(),s.max=parseFloat(e[0]),s.min=parseFloat(e[2])),(r.left||r.right)&&(s.lt_gt=r),p.push(s))}else if(m.includes(":")){let e,n,i;if(e=m.substring(m.indexOf("(")+1,m.indexOf(")")),n=e.split(/\s*:\s*/),t=n[0].trim(),s.feature=t,i=parseFloat(n[1]),t.includes("min-")||t.includes("max-"))if(t=t.replace("min-",""),t=t.replace("max-",""),s.feature=t,0==p.length)n[0].includes("min-")&&(s.min=i),n[0].includes("max-")&&(s.max=i),p.push(s);else for(let r of p)r.feature!=s.feature?(n[0].includes("min-")&&(s.min=i),n[0].includes("max-")&&(s.max=i),p.push(s)):(n[0].includes("min-")&&(r.min=i),n[0].includes("max-")&&(r.max=i));else s.abs=i,p.push(s)}else{let e=m.substring(m.indexOf("(")+1,m.indexOf(")"));e&&(s.feature=e,s.abs=!0,p.push(s))}}e=s.includes("(")&&s.includes(")")?o.substring(o.indexOf("{")+1,o.lastIndexOf("}")):o,t=e.split(/\s*}\s*/);for(let x of t){let e,t,n;e=x.substring(0,x.indexOf("{")),t=x.substring(x.indexOf("{")+1),n=e.split(/\s*,\s*/);for(let i of n){let e={element:i.trim(),properties:t.trim()};""==e.element&&""===e.properties||h.push(e)}}r.contexts=p,r.sheets=h,i.push(r)}}appendStyles(i),console.log(i)}function get(e){return new Promise(function(t,n){var i=new XMLHttpRequest;i.open("GET",e),i.onload=function(){200==i.status?t(i.response):n(Error(i.statusText))},i.onerror=function(){n(Error("Network Error"))},i.send()})}function appendStyles(){let e=document.querySelector("head"),s=document.createElement("style"),r=i.length,o=".css-ctx-queries-",l="",a="";s.type="text/css",s.id="cssCtxQueriesStyleTag";for(let u of i){r--;for(let e of u.sheets){let n=e.element;u.root.shadowRoot?u.root.shadowRoot.querySelector("slot")?l+=o+(t+r)+" "+n.replace("&gt;",">")+"{"+e.properties+"}":a+=":host("+o+(t+r)+") "+n.replace("&gt;",">")+"{"+e.properties+"}":l+="html"===n?n+o+(t+r)+"{"+e.properties+"}":o+(t+r)+" "+n.replace("&gt;",">")+"{"+e.properties+"}"}}if(e.querySelector("#cssCtxQueriesStyleTag")?(e.querySelector("#cssCtxQueriesStyleTag").innerHTML="",e.querySelector("#cssCtxQueriesStyleTag").appendChild(document.createTextNode(l))):(s.appendChild(document.createTextNode(l)),e.appendChild(s)),n.shadowRoot&&!n.shadowRoot.querySelector("slot"))if(n.shadowRoot.querySelector("#cssCtxQueriesStyleTag"))n.shadowRoot.querySelector("#cssCtxQueriesStyleTag").innerHTML="",n.shadowRoot.querySelector("#cssCtxQueriesStyleTag").appendChild(document.createTextNode(l));else{var c=document.createElement("style");c.type="text/css",c.id="cssCtxQueriesStyleTag",c.appendChild(document.createTextNode(a)),n.shadowRoot.appendChild(c)}}function updateFeatVal(t,n){for(let i of e)i.name==t&&(i.value=n)}function performContextCheck(n,s){updateFeatVal(n,s);let r=i.length;for(let o of i){r--;let n="css-ctx-queries-"+(t+r),i=!0;for(let s of o.contexts){let t=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY;for(let r of e)r.name===s.feature&&(r.supported?s.hasOwnProperty("abs")?Number.isInteger(s.abs)?r.value!=s.abs&&(i=!1):r.value||(i=!1):(s.hasOwnProperty("min")&&(t=s.min),s.hasOwnProperty("max")&&(n=s.max),s.hasOwnProperty("lt_gt")&&(s.lt_gt.left&&++t,s.lt_gt.right&&--n),t==-(1/0)&&n==1/0||(r.value<t||n<r.value)&&(i=!1)):i=!1)}i?o.root.classList.contains(n)||o.root.classList.add(n):o.root.classList.contains(n)&&o.root.classList.remove(n)}}let e=[{name:"devicelight",value:null,callback:null},{name:"devicemotion",value:null,callback:null},{name:"deviceproximity",value:null,callback:null},{name:"touch",value:null,callback:function(){return!!("ontouchstart"in window||navigator.maxTouchPoints)}}];!function(){for(feature of e)null==feature.callback?"on"+feature.name in window?feature.supported=!0:feature.supported=!1:feature.supported=feature.callback();console.log(e)}();const t=Math.floor(200*Math.random())+701;let n=document.querySelector("html"),i=[];class s extends HTMLElement{constructor(){super()}connectedCallback(){void 0!=this.parentNode.host&&(n=this.parentNode.host),this.href(),this.style.display="none"}content(e){let t=this.innerHTML;""!=t.trim()?generateContextStyles(t.trim(),e):console.error("Context-Styles have not been declared, please use the href attribute or write them directly in the context-style tag.")}href(){let e=!1;this.hasAttribute("context")&&""!=this.getAttribute("context")&&(e=this.getAttribute("context").replace(/>/g,"&gt;").replace(/</g,"&lt;")),this.hasAttribute("href")&&""!=this.getAttribute("href")?get(this.getAttribute("href")).then(t=>{let n=t.replace(/>/g,"&gt;").replace(/</g,"&lt;");generateContextStyles(n,e),this.content(e)},e=>{console.error("Failed!",e)}):(console.log("href empty or non existent"),this.content(e))}}customElements.define("context-style",s),window.addEventListener("devicelight",function(e){let t=e.value/10;performContextCheck("devicelight",Math.round(t))});let r=0;window.addEventListener("devicemotion",function(e){let t=Math.round(Math.sqrt(e.acceleration.y*e.acceleration.y+e.acceleration.x*e.acceleration.x));(t>r||0==t)&&(r=t,performContextCheck("devicemotion",t))}),window.addEventListener("deviceproximity",function(e){let t=(e.value-e.min)/(e.max-e.min)*100;performContextCheck("deviceproximity",t)}),performContextCheck("touch",!!("ontouchstart"in window||navigator.maxTouchPoints));