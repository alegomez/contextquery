<script>function findClosingBracket(e,t){let i=t.indexOf(e[0],t.indexOf("@context")),n=1;for(;n>0;){let s=t[++i];s==e[0]?n++:s==e[1]&&n--}return i}function mixedSigns(e,t,i){if(2==e.length){let n,s,r=!1;for(let o in e)e[o].includes(t)&&(s=e[o],e.splice(o,1),0==o&&(r=!0));void 0!=s&&(n=s.split(t),r?(e.unshift(n[1]),e.unshift(n[0]),"&lt;"===t?i.left=!0:i.right=!0):(e.push(n[0]),e.push(n[1]),"&lt;"===t?i.right=!0:i.left=!0))}}function get(e){return new Promise(function(t,i){var n=new XMLHttpRequest;n.open("GET",e),n.onload=function(){200==n.status?t(n.response):i(Error(n.statusText))},n.onerror=function(){i(Error("Network Error"))},n.send()})}function updateFeatVal(t,i){for(let n of e)n.name==t&&(n.value=i)}function performContextCheck(e,t){updateFeatVal(e,t);for(let n of i)if(n.context.includes(e)&&(n.determineMatch(),0!=n._private.host)){let e=document.querySelector("html"),t="css-ctx-queries-"+i.indexOf(n);void 0!=n._private.host&&(e=n._private.host),n.matches?e.classList.contains(t)||e.classList.add(t):e.classList.contains(t)&&e.classList.remove(t)}}let e=[{name:"devicelight",value:null,callback:null},{name:"devicemotion",value:null,callback:null},{name:"deviceproximity",value:null,callback:null},{name:"touch",value:null,callback:function(){return!!("ontouchstart"in window||navigator.maxTouchPoints)}},{name:"time",value:null,callback:function(){return!0}},{name:"battery",value:null,callback:function(){return!0}}];!function(){for(feature of e)null==feature.callback?"on"+feature.name in window?feature.supported=!0:feature.supported=!1:feature.supported=feature.callback();console.log(e)}();let t=0,i=[];new CustomEvent("change");class ContextQueryList{constructor(e,t){this.context=e,this.onchange=null,this._private={listeners:{},host:t,queries:this.breakQueriesDown()},this.matches=this.determineMatch()}addEventListener(e,t){e in this._private.listeners||(this._private.listeners[e]=[]),this._private.listeners[e].push(t)}addlistener(e){this.addEventListener("change",e)}removeEventListener(e,t){if(e in this._private.listeners){let i=this._private.listeners[e];for(let n in i)if(console.log(i[n]),i[n].toString()===t.toString())return void i.splice(n,1)}}removeListener(e){this.removeEventListener("change",e)}dispatchEvent(e){if(!(e.type in this._private.listeners))return!0;let t=this._private.listeners[e.type];for(let i of t)i.call(this,e);return!e.defaultPrevented}set onchange(e){"function"==typeof e&&(this.removeEventListener("change",this.onchange),onchange=e,this.addEventListener("change",e))}get onchange(){return onchange}breakQueriesDown(){let e=[],t=/\s*,\s*|\s*or\s*/i,i=this.context.split(t),n="<",s=">",r="<=",o=">=";for(let a of i){let t=[],i=a.split(/\s*and\s*/i);for(let l of i){let e,i,a=l.substring(l.indexOf("(")+1,l.indexOf(")")),u="%",c={},h={left:!1,right:!1};if(l.includes(n)||l.includes(s)){if(a.includes(n)&&a.includes(s))return void console.error("you have mixed the greater than and less than symbol in an expression!");a.includes(n)&&(a.includes(r)?(e=a.split(r),mixedSigns(e,n,h)):(e=a.split(n),h={left:!0,right:!0}),2==e.length?e[0].includes(u)||!isNaN(e[0])?(c.min=parseFloat(e[0]),c.feature=e[1].trim()):(c.max=parseFloat(e[1]),c.feature=e[0].trim()):(c.feature=e[1].trim(),c.min=parseFloat(e[0]),c.max=parseFloat(e[2])),(h.left||h.right)&&(c.lt_gt=h),t.push(c)),a.includes(s)&&(a.includes(o)?(e=a.split(o),mixedSigns(e,s,h)):(e=a.split(s),h={left:!0,right:!0}),2==e.length?e[0].includes(u)||!isNaN(e[0])?(c.max=parseFloat(e[0]),c.feature=e[1].trim()):(c.min=parseFloat(e[1]),c.feature=e[0].trim()):(c.feature=e[1].trim(),c.max=parseFloat(e[0]),c.min=parseFloat(e[2])),(h.left||h.right)&&(c.lt_gt=h),t.push(c))}else if(l.includes(":")){let e,n,s;if(e=l.substring(l.indexOf("(")+1,l.indexOf(")")),n=e.split(/\s*:\s*/),i=n[0].trim(),c.feature=i,s=parseFloat(n[1]),i.includes("min-")||i.includes("max-"))if(i=i.replace("min-",""),i=i.replace("max-",""),c.feature=i,0==t.length)n[0].includes("min-")&&(c.min=s),n[0].includes("max-")&&(c.max=s),t.push(c);else for(let r of t)r.feature!=c.feature?(n[0].includes("min-")&&(c.min=s),n[0].includes("max-")&&(c.max=s),t.push(c)):(n[0].includes("min-")&&(r.min=s),n[0].includes("max-")&&(r.max=s));else c.abs=s,t.push(c)}else{let e=l.substring(l.indexOf("(")+1,l.indexOf(")"));e&&(c.feature=e,c.abs=!0,t.push(c))}}e.push(t)}return e}determineMatch(){let t=!1;for(let i of this._private.queries){let n=!0;for(let s of i){let t=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;for(let r of e)r.name===s.feature&&(s.hasOwnProperty("abs")?Number.isInteger(s.abs)?r.value!=s.abs&&(n=!1):r.value||(n=!1):(s.hasOwnProperty("min")&&(t=s.min),s.hasOwnProperty("max")&&(i=s.max),s.hasOwnProperty("lt_gt")&&(s.lt_gt.left&&++t,s.lt_gt.right&&--i),t==-(1/0)&&i==1/0||(r.value<t||i<r.value)&&(n=!1)))}n&&(t=!0)}if(t!=this.matches){if(void 0==this.matches)return t;this.matches=t,this.dispatchEvent(new CustomEvent("change",{detail:{matches:t}}))}}}class s extends HTMLElement{constructor(){super(),this.arrayOfQueries=[]}connectedCallback(){this.href(),this.style.display="none"}content(e){let t=this.innerHTML;""!=t.trim()?(t=t.replace(/&gt;/g,">").replace(/&lt;/g,"<"),this.instantiateContextQueryObjects(t.trim(),e)):console.error("Context-Styles have not been declared, please use the href attribute or write them directly in the context-style tag.")}href(){let e=!1;this.hasAttribute("context")&&""!=this.getAttribute("context")&&(e=this.getAttribute("context")),this.hasAttribute("href")&&""!=this.getAttribute("href")?get(this.getAttribute("href")).then(t=>{this.instantiateContextQueryObjects(t,e)},e=>{console.error("Failed!",e)}):(console.log("href empty or non existent"),this.content(e))}instantiateContextQueryObjects(e,s){this.factoriseContextQueries(e,s);let r,o=document.querySelector("head"),a=".css-ctx-queries-";for(let l of this.arrayOfQueries){void 0!=this.parentNode.host&&(this.parentNode.host.shadowRoot.querySelector("slot")||(r=this.parentNode.host,o=this.parentNode.host.shadowRoot));let e=new ContextQueryList(l.expression,r),s="";e.breakQueriesDown(),i.push(e);for(let u of l.styles){let e=u.selector;s+=void 0!=this.parentNode.host?this.parentNode.host.shadowRoot.querySelector("slot")?a+t+" "+this.parentNode.host.localName+" "+e.replace("&gt;",">")+"{"+u.properties+"}":":host("+a+t+") "+e.replace("&gt;",">")+"{"+u.properties+"}":"html"===e?e+a+t+"{"+u.properties+"}":a+t+" "+e.replace("&gt;",">")+"{"+u.properties+"}"}if(o.querySelector("#cssCtxQueriesStyleTag"))o.querySelector("#cssCtxQueriesStyleTag").appendChild(document.createTextNode(s));else{let e=document.createElement("style");e.id="cssCtxQueriesStyleTag",e.appendChild(document.createTextNode(s)),o.appendChild(e)}t++}console.log(i)}factoriseContextQueries(e,t){if(e.includes("@context")){let i=e.substring(e.indexOf("@context"),findClosingBracket("{}",e)+1),n=e.replace(i,"");n=n.trim(),this.arrayOfQueries.push(i),this.factoriseContextQueries(n,t)}else{this.arrayOfQueries.push("@context"+t+" {"+e+"}");let i=[];for(let n of this.arrayOfQueries){let e=n.substring(8,n.indexOf("{")),t=n.substring(n.indexOf("{")+1,n.lastIndexOf("}")),s=[],r=t.split(/\s*}\s*/);for(let o of r){let e,t,i;e=o.substring(0,o.indexOf("{")),t=o.substring(o.indexOf("{")+1),i=e.split(/\s*,\s*/);for(let n of i){let e={selector:n.trim(),properties:t.trim()};""==e.selector&&""===e.properties||s.push(e)}}i.push({expression:e.trim(),styles:s})}if(i.length>1){let e=i[i.length-1].expression;for(let t=0;t<i.length-1;t++)i[t].expression+=" and "+e}this.arrayOfQueries=[],this.arrayOfQueries=i,i=[]}}}customElements.define("context-style",s),window.matchContext=function(e){var t=new ContextQueryList(e,!1);return setTimeout(function(){i.push(t)},0),t},window.addEventListener("devicelight",function(e){let t=e.value/10;performContextCheck("devicelight",Math.round(t))});let r=0;window.addEventListener("devicemotion",function(e){let t=Math.round(Math.sqrt(e.acceleration.y*e.acceleration.y+e.acceleration.x*e.acceleration.x));(t>r||0==t)&&(r=t,performContextCheck("devicemotion",t))}),window.addEventListener("deviceproximity",function(e){let t=(e.value-e.min)/(e.max-e.min)*100;performContextCheck("deviceproximity",t)}),performContextCheck("touch",!!("ontouchstart"in window||navigator.maxTouchPoints));let o=new Date;const a=3e4;performContextCheck("time",60*o.getHours()+o.getMinutes()),setInterval(function(){let e=new Date,t=e.getHours(),i=e.getMinutes(),n=60*t+i;performContextCheck("time",n)},a);</script>