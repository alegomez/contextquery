<script>function findClosingBracket(e,t){let i=t.indexOf(e[0],t.indexOf("@context")),n=1;for(;n>0;){let s=t[++i];s==e[0]?n++:s==e[1]&&n--}return i}function mixedSigns(e,t,i){if(2==e.length){let n,s,r=!1;for(let i in e)e[i].includes(t)&&(s=e[i],e.splice(i,1),0==i&&(r=!0));void 0!=s&&(n=s.split(t),r?(e.unshift(n[1]),e.unshift(n[0]),"&lt;"===t?i.left=!0:i.right=!0):(e.push(n[0]),e.push(n[1]),"&lt;"===t?i.right=!0:i.left=!0))}}function get(e){return new Promise(function(t,i){var n=new XMLHttpRequest;n.open("GET",e),n.onload=function(){200==n.status?t(n.response):i(Error(n.statusText))},n.onerror=function(){i(Error("Network Error"))},n.send()})}function updateFeatVal(e,t){for(let i of features)i.name==e&&(i.value=t)}function performContextCheck(e,t){updateFeatVal(e,t);for(let t of window.contextQueryObjectsList)if(t.context.includes(e)&&(t.determineMatch(),0!=t._private.host)){let e=document.querySelector("html"),i="css-ctx-queries-"+window.contextQueryObjectsList.indexOf(t);void 0!=t._private.host&&(e=t._private.host),t.matches?e.classList.contains(i)||e.classList.add(i):e.classList.contains(i)&&e.classList.remove(i)}}let features=[{name:"devicelight",value:null,callback:null},{name:"devicemotion",value:null,callback:null},{name:"deviceproximity",value:null,callback:null},{name:"touch",value:null,callback:function(){return!!("ontouchstart"in window||navigator.maxTouchPoints)}},{name:"time",value:null,callback:function(){return!0}},{name:"battery",value:null,callback:function(){return!0}}];!function(){for(feature of features)null==feature.callback?"on"+feature.name in window?feature.supported=!0:feature.supported=!1:feature.supported=feature.callback();console.log(features)}();class ContextQueryList{constructor(e,t){this.context=e,this.onchange=null,this._private={listeners:{},host:t,queries:this.breakQueriesDown()},this.matches=this.determineMatch()}addEventListener(e,t){e in this._private.listeners||(this._private.listeners[e]=[]),this._private.listeners[e].push(t)}addListener(e){this.addEventListener("change",e)}removeEventListener(e,t){if(!(e in this._private.listeners))return;let i=this._private.listeners[e];for(let e in i)if(console.log(i[e]),i[e].toString()===t.toString())return void i.splice(e,1)}removeListener(e){this.removeEventListener("change",e)}dispatchEvent(e){if(!(e.type in this._private.listeners))return!0;let t=this._private.listeners[e.type];for(let i of t)i.call(this,e);return!e.defaultPrevented}set onchange(e){"function"==typeof e&&(this.removeEventListener("change",this.onchange),onchange=e,this.addEventListener("change",e))}get onchange(){return onchange}breakQueriesDown(){let e=[],t=/\s*,\s*|\s*or\s*/i,i=this.context.split(t);for(let t of i){let i=[],n=t.split(/\s*and\s*/i);for(let e of n){let t,n,s=e.substring(e.indexOf("(")+1,e.indexOf(")")),r={},o={left:!1,right:!1};if(e.includes("<")||e.includes(">")){if(s.includes("<")&&s.includes(">"))return void console.error("you have mixed the greater than and less than symbol in an expression!");s.includes("<")&&(s.includes("<=")?mixedSigns(t=s.split("<="),"<",o):(t=s.split("<"),o={left:!0,right:!0}),2==t.length?t[0].includes("%")||!isNaN(t[0])?(r.min=parseFloat(t[0]),r.feature=t[1].trim()):(r.max=parseFloat(t[1]),r.feature=t[0].trim()):(r.feature=t[1].trim(),r.min=parseFloat(t[0]),r.max=parseFloat(t[2])),(o.left||o.right)&&(r.lt_gt=o),i.push(r)),s.includes(">")&&(s.includes(">=")?mixedSigns(t=s.split(">="),">",o):(t=s.split(">"),o={left:!0,right:!0}),2==t.length?t[0].includes("%")||!isNaN(t[0])?(r.max=parseFloat(t[0]),r.feature=t[1].trim()):(r.min=parseFloat(t[1]),r.feature=t[0].trim()):(r.feature=t[1].trim(),r.max=parseFloat(t[0]),r.min=parseFloat(t[2])),(o.left||o.right)&&(r.lt_gt=o),i.push(r))}else if(e.includes(":")){let t,s,o;if(t=e.substring(e.indexOf("(")+1,e.indexOf(")")),s=t.split(/\s*:\s*/),n=s[0].trim(),r.feature=n,o=parseFloat(s[1]),n.includes("min-")||n.includes("max-"))if(n=n.replace("min-",""),n=n.replace("max-",""),r.feature=n,0==i.length)s[0].includes("min-")&&(r.min=o),s[0].includes("max-")&&(r.max=o),i.push(r);else for(let e of i)e.feature!=r.feature?(s[0].includes("min-")&&(r.min=o),s[0].includes("max-")&&(r.max=o),i.push(r)):(s[0].includes("min-")&&(e.min=o),s[0].includes("max-")&&(e.max=o));else r.abs=o,i.push(r)}else{let t=e.substring(e.indexOf("(")+1,e.indexOf(")"));t&&(r.feature=t,r.abs=!0,i.push(r))}}e.push(i)}return e}determineMatch(){let e=!1;for(let t of this._private.queries){let i=!0;for(let e of t){let t=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY;for(let s of features)s.name===e.feature&&(e.hasOwnProperty("abs")?Number.isInteger(e.abs)?s.value!=e.abs&&(i=!1):s.value||(i=!1):(e.hasOwnProperty("min")&&(t=e.min),e.hasOwnProperty("max")&&(n=e.max),e.hasOwnProperty("lt_gt")&&(e.lt_gt.left&&++t,e.lt_gt.right&&--n),t==-1/0&&n==1/0||(s.value<t||n<s.value)&&(i=!1)))}i&&(e=!0)}if(e!=this.matches){if(void 0==this.matches)return e;this.matches=e,this.dispatchEvent(new CustomEvent("change",{detail:{matches:e,target:this}}))}}}class contextStyle extends HTMLElement{constructor(){super(),this.arrayOfQueries=[]}connectedCallback(){this.href(),this.style.display="none"}content(e){let t=this.innerHTML;""!=t.trim()?(t=t.replace(/&gt;/g,">").replace(/&lt;/g,"<"),this.instantiateContextQueryObjects(t.trim(),e)):console.error("Context-Styles have not been declared, please use the href attribute or write them directly in the context-style tag.")}href(){let e=!1;this.hasAttribute("context")&&""!=this.getAttribute("context")&&(e=this.getAttribute("context")),this.hasAttribute("href")&&""!=this.getAttribute("href")?get(this.getAttribute("href")).then(t=>{this.instantiateContextQueryObjects(t,e)},e=>{console.error("Failed!",e)}):this.content(e)}instantiateContextQueryObjects(e,t){this.factoriseContextQueries(e,t);let i,n=document.querySelector("head"),s=".css-ctx-queries-";for(let e of this.arrayOfQueries){void 0!=this.parentNode.host&&(this.parentNode.host.shadowRoot.querySelector("slot")||(i=this.parentNode.host,n=this.parentNode.host.shadowRoot));let t=new ContextQueryList(e.expression,i),r="";t.breakQueriesDown(),void 0===window.contextQueryObjectsList&&(window.contextQueryObjectsList=[]),window.contextQueryObjectsList.push(t);for(let i of e.styles){let e=i.selector;void 0!=this.parentNode.host?this.parentNode.host.shadowRoot.querySelector("slot")?r+=s+window.contextQueryObjectsList.indexOf(t)+" "+this.parentNode.host.localName+" "+e.replace("&gt;",">")+"{"+i.properties+"}":r+=":host"==e?":host("+s+window.contextQueryObjectsList.indexOf(t)+") {"+i.properties+"}":":host("+s+window.contextQueryObjectsList.indexOf(t)+") "+e.replace("&gt;",">")+"{"+i.properties+"}":r+="html"===e?e+s+window.contextQueryObjectsList.indexOf(t)+"{"+i.properties+"}":s+window.contextQueryObjectsList.indexOf(t)+" "+e.replace("&gt;",">")+"{"+i.properties+"}"}if(n.querySelector("#cssCtxQueriesStyleTag"))n.querySelector("#cssCtxQueriesStyleTag").appendChild(document.createTextNode(r));else{let e=document.createElement("style");e.id="cssCtxQueriesStyleTag",e.appendChild(document.createTextNode(r)),n.appendChild(e)}}}factoriseContextQueries(e,t){if(e.includes("@context")){let i=e.substring(e.indexOf("@context"),findClosingBracket("{}",e)+1),n=e.replace(i,"");n=n.trim(),this.arrayOfQueries.push(i),this.factoriseContextQueries(n,t)}else{this.arrayOfQueries.push("@context"+t+" {"+e+"}");let i=[];for(let e of this.arrayOfQueries){let t=e.substring(8,e.indexOf("{")),n=[],s=e.substring(e.indexOf("{")+1,e.lastIndexOf("}")).split(/\s*}\s*/);for(let e of s){let t,i,s;t=e.substring(0,e.indexOf("{")),i=e.substring(e.indexOf("{")+1),s=t.split(/\s*,\s*/);for(let e of s){let t={selector:e.trim(),properties:i.trim()};""==t.selector&&""===t.properties||n.push(t)}}i.push({expression:t.trim(),styles:n})}if(i.length>1){let e=i[i.length-1].expression;for(let t=0;t<i.length-1;t++)i[t].expression+=" and "+e}this.arrayOfQueries=[],this.arrayOfQueries=i,i=[]}}}customElements.define("context-style",contextStyle),window.matchContext=function(e){var t=new ContextQueryList(e,!1);return setTimeout(function(){void 0===window.contextQueryObjectsList&&(window.contextQueryObjectsList=[]),window.contextQueryObjectsList.push(t)},0),t},window.addEventListener("devicelight",function(e){let t=e.value/10;performContextCheck("devicelight",Math.round(t))});let acceleration=0;window.addEventListener("devicemotion",function(e){let t=Math.round(Math.sqrt(e.acceleration.y*e.acceleration.y+e.acceleration.x*e.acceleration.x));(t>acceleration||0==t)&&(acceleration=t,performContextCheck("devicemotion",t))}),window.addEventListener("deviceproximity",function(e){performContextCheck("deviceproximity",(e.value-e.min)/(e.max-e.min)*100)}),performContextCheck("touch",!!("ontouchstart"in window||navigator.maxTouchPoints));let date=new Date;const interval=3e4;performContextCheck("time",60*date.getHours()+date.getMinutes()),setInterval(function(){let e=new Date;performContextCheck("time",60*e.getHours()+e.getMinutes())},3e4);</script>