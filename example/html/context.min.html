<script>function findClosingBracket(e,t){let i=t.indexOf(e[0],t.indexOf("@context")),s=1;for(;s>0;){let n=t[++i];n==e[0]?s++:n==e[1]&&s--}return i}function mixedSigns(e,t,i){if(2==e.length){let s,n,r=!1;for(let i in e)e[i].includes(t)&&(n=e[i],e.splice(i,1),0==i&&(r=!0));void 0!=n&&(s=n.split(t),r?(e.unshift(s[1]),e.unshift(s[0]),"&lt;"===t?i.left=!0:i.right=!0):(e.push(s[0]),e.push(s[1]),"&lt;"===t?i.right=!0:i.left=!0))}}function updateFeatVal(e,t){for(let i of features)i.name==e&&(i.value=t)}function performContextCheck(e,t){updateFeatVal(e,t);for(let e of window.contextQueryObjectsList)if(e.determineMatch(),0!=e._private.host){let t=document.querySelector("html"),i="css-ctx-queries-"+window.contextQueryObjectsList.indexOf(e);void 0!=e._private.host&&(t=e._private.host),e.matches?t.classList.contains(i)||t.classList.add(i):t.classList.contains(i)&&t.classList.remove(i)}}let features=[{name:"devicelight",value:null,callback:null},{name:"devicemotion",value:null,callback:null},{name:"deviceproximity",value:null,callback:null},{name:"touch",value:null,callback:function(){return!!("ontouchstart"in window||navigator.maxTouchPoints)}},{name:"time",value:null,callback:function(){return!0}},{name:"battery",value:null,callback:function(){return!0}}];!function(){for(feature of features)null==feature.callback?"on"+feature.name in window?feature.supported=!0:feature.supported=!1:feature.supported=feature.callback();console.log(features)}();class ContextQueryList{constructor(e,t,i=""){this.context=e,this.onchange=null,this._private={listeners:{},host:t,selectors:i,queries:this.breakQueriesDown()},this.matches=this.determineMatch()}addEventListener(e,t){e in this._private.listeners||(this._private.listeners[e]=[]),this._private.listeners[e].push(t)}addListener(e){this.addEventListener("change",e)}removeEventListener(e,t){if(!(e in this._private.listeners))return;let i=this._private.listeners[e];for(let e in i)if(console.log(i[e]),i[e].toString()===t.toString())return void i.splice(e,1)}removeListener(e){this.removeEventListener("change",e)}dispatchEvent(e){if(!(e.type in this._private.listeners))return!0;let t=this._private.listeners[e.type];for(let i of t)i.call(this,e);return!e.defaultPrevented}set onchange(e){"function"==typeof e&&(this.removeEventListener("change",this.onchange),onchange=e,this.addEventListener("change",e))}get onchange(){return onchange}breakQueriesDown(){let e=[],t=/\s*,\s*|\s*or\s*/i,i=this.context.split(t);for(let t of i){let i=[],s=t.split(/\s*and\s*/i);for(let e of s){let t,s,n=e.substring(e.indexOf("(")+1,e.indexOf(")")),r={},o={left:!1,right:!1};if(e.includes("<")||e.includes(">")){if(n.includes("<")&&n.includes(">"))return void console.error("you have mixed the greater than and less than symbol in an expression!");n.includes("<")&&(n.includes("<=")?mixedSigns(t=n.split("<="),"<",o):(t=n.split("<"),o={left:!0,right:!0}),2==t.length?t[0].includes("%")||!isNaN(t[0])?(r.min=parseFloat(t[0]),r.feature=t[1].trim()):(r.max=parseFloat(t[1]),r.feature=t[0].trim()):(r.feature=t[1].trim(),r.min=parseFloat(t[0]),r.max=parseFloat(t[2])),(o.left||o.right)&&(r.lt_gt=o),i.push(r)),n.includes(">")&&(n.includes(">=")?mixedSigns(t=n.split(">="),">",o):(t=n.split(">"),o={left:!0,right:!0}),2==t.length?t[0].includes("%")||!isNaN(t[0])?(r.max=parseFloat(t[0]),r.feature=t[1].trim()):(r.min=parseFloat(t[1]),r.feature=t[0].trim()):(r.feature=t[1].trim(),r.max=parseFloat(t[0]),r.min=parseFloat(t[2])),(o.left||o.right)&&(r.lt_gt=o),i.push(r))}else if(e.includes(":")){let t,n,o;if(t=e.substring(e.indexOf("(")+1,e.indexOf(")")),n=t.split(/\s*:\s*/),s=n[0].trim(),r.feature=s,o=parseFloat(n[1]),s.includes("min-")||s.includes("max-"))if(s=s.replace("min-",""),s=s.replace("max-",""),r.feature=s,0==i.length)n[0].includes("min-")&&(r.min=o),n[0].includes("max-")&&(r.max=o),i.push(r);else for(let e of i)e.feature!=r.feature?(n[0].includes("min-")&&(r.min=o),n[0].includes("max-")&&(r.max=o),i.push(r)):(n[0].includes("min-")&&(e.min=o),n[0].includes("max-")&&(e.max=o));else r.abs=o,i.push(r)}else{let t=e.substring(e.indexOf("(")+1,e.indexOf(")"));t&&(r.feature=t,r.abs=!0,i.push(r))}}e.push(i)}return e}determineMatch(){let e=!1;for(let t of this._private.queries){let i=!0;for(let e of t){let t=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;for(let n of features)n.name===e.feature&&(e.hasOwnProperty("abs")?Number.isInteger(e.abs)?n.value!=e.abs&&(i=!1):n.value||(i=!1):(e.hasOwnProperty("min")&&(t=e.min),e.hasOwnProperty("max")&&(s=e.max),e.hasOwnProperty("lt_gt")&&(e.lt_gt.left&&++t,e.lt_gt.right&&--s),t==-1/0&&s==1/0||(n.value<t||s<n.value)&&(i=!1)))}i&&(e=!0)}if(e!=this.matches){if(void 0==this.matches)return e;this.matches=e,this.dispatchEvent(new CustomEvent("change",{detail:{matches:e,target:this}}))}}}class contextStyle extends HTMLElement{constructor(){super(),this.arrayOfQueries=[],this._host=void 0,this._head=document.querySelector("head")}connectedCallback(){this.style.display="none",void 0!=this.parentNode.host&&(this.parentNode.host.shadowRoot.querySelector("slot")||(this._host=this.parentNode.host,this._head=this._host.shadowRoot)),this.getHrefAttr()}disconnectedCallback(){for(let e=0;e<window.contextQueryObjectsList.length;e++)for(let t of this.arrayOfQueries)window.contextQueryObjectsList[e]._private.host===this._host&&window.contextQueryObjectsList[e].context===t.expression&&JSON.stringify(window.contextQueryObjectsList[e]._private.selectors)===JSON.stringify(t.styles)&&window.contextQueryObjectsList.splice(e,1)}getContent(e){let t=this.innerHTML;""!=t.trim()?(t=t.replace(/&gt;/g,">").replace(/&lt;/g,"<"),this.instantiateContextQueryObjects(t.trim(),e)):console.error("Context-Styles have not been declared, please use the href attribute or write them directly in the context-style tag.")}getHrefAttr(){let e=!1;this.hasAttribute("context")&&""!=this.getAttribute("context")&&(e=this.getAttribute("context")),this.hasAttribute("href")&&""!=this.getAttribute("href")?this.getURL(this.getAttribute("href")).then(t=>{this.instantiateContextQueryObjects(t,e)},e=>{console.error("Failed!",e)}):this.getContent(e)}getURL(e){return new Promise(function(t,i){var s=new XMLHttpRequest;s.open("GET",e),s.onload=function(){200==s.status?t(s.response):i(Error(s.statusText))},s.onerror=function(){i(Error("Network Error"))},s.send()})}instantiateContextQueryObjects(e,t){this.factoriseContextQueries(e,t);const i=".css-ctx-queries-";for(let e of this.arrayOfQueries){let t=new ContextQueryList(e.expression,this._host,e.styles),s="";t.breakQueriesDown(),void 0===window.contextQueryObjectsList&&(window.contextQueryObjectsList=[]),window.contextQueryObjectsList.push(t);for(let n of e.styles){let e=n.selector;void 0!=this._host?this._host.shadowRoot.querySelector("slot")?s+=i+window.contextQueryObjectsList.indexOf(t)+" "+this.parentNode.host.localName+" "+e.replace("&gt;",">")+"{"+n.properties+"}":s+=":host"==e?":host("+i+window.contextQueryObjectsList.indexOf(t)+") {"+n.properties+"}":":host("+i+window.contextQueryObjectsList.indexOf(t)+") "+e.replace("&gt;",">")+"{"+n.properties+"}":s+="html"===e?e+i+window.contextQueryObjectsList.indexOf(t)+"{"+n.properties+"}":i+window.contextQueryObjectsList.indexOf(t)+" "+e.replace("&gt;",">")+"{"+n.properties+"}"}if(this._head.querySelector("#cssCtxQueriesStyleTag"))this._head.querySelector("#cssCtxQueriesStyleTag").appendChild(document.createTextNode(s));else{let e=document.createElement("style");e.id="cssCtxQueriesStyleTag",e.appendChild(document.createTextNode(s)),this._head.appendChild(e)}}}factoriseContextQueries(e,t){if(e.includes("@context")){let i=e.substring(e.indexOf("@context"),findClosingBracket("{}",e)+1),s=e.replace(i,"");s=s.trim(),this.arrayOfQueries.push(i),this.factoriseContextQueries(s,t)}else{0!=t&&this.arrayOfQueries.push("@context "+t+" {"+e+"}");let i=[];for(let e of this.arrayOfQueries){let t=e.substring(8,e.indexOf("{")),s=[],n=e.substring(e.indexOf("{")+1,e.lastIndexOf("}")).split(/\s*}\s*/);for(let e of n){let t,i,n;t=e.substring(0,e.indexOf("{")),i=e.substring(e.indexOf("{")+1),n=t.split(/\s*,\s*/);for(let e of n){let t={selector:e.trim(),properties:i.trim()};""==t.selector&&""===t.properties||s.push(t)}}i.push({expression:t.trim(),styles:s})}if(0!=t){let e=i[i.length-1].expression;for(let t=0;t<i.length-1;t++)i[t].expression+=" and "+e}this.arrayOfQueries=[];for(let e of i)e.styles.length>0&&this.arrayOfQueries.push(e)}}}customElements.define("context-style",contextStyle),window.matchContext=function(e){var t=new ContextQueryList(e,!1);return setTimeout(function(){void 0===window.contextQueryObjectsList&&(window.contextQueryObjectsList=[]),window.contextQueryObjectsList.push(t)},0),t},window.addEventListener("devicelight",function(e){let t=e.value/10;performContextCheck("devicelight",Math.round(t))});let acceleration=0;window.addEventListener("devicemotion",function(e){let t=Math.round(Math.sqrt(e.acceleration.y*e.acceleration.y+e.acceleration.x*e.acceleration.x));(t>acceleration||0==t)&&(acceleration=t,performContextCheck("devicemotion",t))}),window.addEventListener("deviceproximity",function(e){performContextCheck("deviceproximity",(e.value-e.min)/(e.max-e.min)*100)}),performContextCheck("touch",!!("ontouchstart"in window||navigator.maxTouchPoints));let date=new Date;const interval=3e4;performContextCheck("time",60*date.getHours()+date.getMinutes()),setInterval(function(){let e=new Date;performContextCheck("time",60*e.getHours()+e.getMinutes())},3e4);</script>